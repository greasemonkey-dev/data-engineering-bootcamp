<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Comprehensive data engineering course for software engineers transitioning to data roles"><meta name=author content="Data Engineering Bootcamp Team"><link href=https://yourusername.github.io/data-engineering-course/sims/bigquery-partitioning-cost/spec/ rel=canonical><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>MicroSim: BigQuery Partitioning Cost Calculator - Data Engineering Bootcamp</title><link rel=stylesheet href=../../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-XXXXXXXXXX"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-XXXXXXXXXX",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#microsim-bigquery-partitioning-cost-calculator class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Data Engineering Bootcamp" class="md-header__button md-logo" aria-label="Data Engineering Bootcamp" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Data Engineering Bootcamp </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> MicroSim: BigQuery Partitioning Cost Calculator </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/yourusername/data-engineering-course title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> data-engineering-course </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../../.. class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../../../course-description/ class=md-tabs__link> Course Description </a> </li> <li class=md-tabs__item> <a href=../../../chapters/01-python-sql-foundations/ class=md-tabs__link> Chapters </a> </li> <li class=md-tabs__item> <a href=../../sql-execution-plan/spec/ class=md-tabs__link> Interactive MicroSims </a> </li> <li class=md-tabs__item> <a href=../../../glossary/ class=md-tabs__link> Resources </a> </li> </ul> </div> </nav> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Data Engineering Bootcamp" class="md-nav__button md-logo" aria-label="Data Engineering Bootcamp" data-md-component=logo> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg> </a> Data Engineering Bootcamp </label> <div class=md-nav__source> <a href=https://github.com/yourusername/data-engineering-course title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> data-engineering-course </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class=md-nav__item> <a href=../../../course-description/ class=md-nav__link> <span class=md-ellipsis> Course Description </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex=0> <span class=md-ellipsis> Chapters </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Chapters </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_1> <label class=md-nav__link for=__nav_3_1 id=__nav_3_1_label tabindex=0> <span class=md-ellipsis> Chapter 1 - Python & SQL Foundations </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_3_1> <span class="md-nav__icon md-icon"></span> Chapter 1 - Python & SQL Foundations </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/01-python-sql-foundations/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> <li class=md-nav__item> <a href=../../../chapters/01-python-sql-foundations/quiz/ class=md-nav__link> <span class=md-ellipsis> Quiz </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_2> <label class=md-nav__link for=__nav_3_2 id=__nav_3_2_label tabindex=0> <span class=md-ellipsis> Chapter 2 - Git & Docker </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_2> <span class="md-nav__icon md-icon"></span> Chapter 2 - Git & Docker </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/02-git-docker/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> <li class=md-nav__item> <a href=../../../chapters/02-git-docker/quiz/ class=md-nav__link> <span class=md-ellipsis> Quiz </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_3> <label class=md-nav__link for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class=md-ellipsis> Chapter 3 - Database Modeling </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Chapter 3 - Database Modeling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/03-database-modeling/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> <li class=md-nav__item> <a href=../../../chapters/03-database-modeling/quiz/ class=md-nav__link> <span class=md-ellipsis> Quiz </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_4> <label class=md-nav__link for=__nav_3_4 id=__nav_3_4_label tabindex=0> <span class=md-ellipsis> Chapter 4 - Data Warehousing </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> Chapter 4 - Data Warehousing </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/04-data-warehousing/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> <li class=md-nav__item> <a href=../../../chapters/04-data-warehousing/quiz/ class=md-nav__link> <span class=md-ellipsis> Quiz </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_5> <label class=md-nav__link for=__nav_3_5 id=__nav_3_5_label tabindex=0> <span class=md-ellipsis> Chapter 5 - ETL/ELT & Apache Airflow </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false> <label class=md-nav__title for=__nav_3_5> <span class="md-nav__icon md-icon"></span> Chapter 5 - ETL/ELT & Apache Airflow </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/05-etl-airflow/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> <li class=md-nav__item> <a href=../../../chapters/05-etl-airflow/quiz/ class=md-nav__link> <span class=md-ellipsis> Quiz </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_6> <label class=md-nav__link for=__nav_3_6 id=__nav_3_6_label tabindex=0> <span class=md-ellipsis> Chapter 6 - Data Quality & Error Handling </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false> <label class=md-nav__title for=__nav_3_6> <span class="md-nav__icon md-icon"></span> Chapter 6 - Data Quality & Error Handling </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/06-data-quality/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_7> <label class=md-nav__link for=__nav_3_7 id=__nav_3_7_label tabindex=0> <span class=md-ellipsis> Chapter 7 - Apache Spark & PySpark </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false> <label class=md-nav__title for=__nav_3_7> <span class="md-nav__icon md-icon"></span> Chapter 7 - Apache Spark & PySpark </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/07-spark-pyspark/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_8> <label class=md-nav__link for=__nav_3_8 id=__nav_3_8_label tabindex=0> <span class=md-ellipsis> Chapter 8 - Kafka & Streaming Data </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false> <label class=md-nav__title for=__nav_3_8> <span class="md-nav__icon md-icon"></span> Chapter 8 - Kafka & Streaming Data </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/08-kafka-streaming/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_9> <label class=md-nav__link for=__nav_3_9 id=__nav_3_9_label tabindex=0> <span class=md-ellipsis> Chapter 9 - Cloud Data Engineering (GCP) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_9_label aria-expanded=false> <label class=md-nav__title for=__nav_3_9> <span class="md-nav__icon md-icon"></span> Chapter 9 - Cloud Data Engineering (GCP) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/09-cloud-gcp/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_10> <label class=md-nav__link for=__nav_3_10 id=__nav_3_10_label tabindex=0> <span class=md-ellipsis> Chapter 10 - Infrastructure as Code & CI/CD </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_10_label aria-expanded=false> <label class=md-nav__title for=__nav_3_10> <span class="md-nav__icon md-icon"></span> Chapter 10 - Infrastructure as Code & CI/CD </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/10-iac-cicd/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_11> <label class=md-nav__link for=__nav_3_11 id=__nav_3_11_label tabindex=0> <span class=md-ellipsis> Chapter 11 - Capstone Project (Design) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_11_label aria-expanded=false> <label class=md-nav__title for=__nav_3_11> <span class="md-nav__icon md-icon"></span> Chapter 11 - Capstone Project (Design) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/11-capstone-part1/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_12> <label class=md-nav__link for=__nav_3_12 id=__nav_3_12_label tabindex=0> <span class=md-ellipsis> Chapter 12 - Capstone Project (Implementation) </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_12_label aria-expanded=false> <label class=md-nav__title for=__nav_3_12> <span class="md-nav__icon md-icon"></span> Chapter 12 - Capstone Project (Implementation) </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../chapters/12-capstone-part2/ class=md-nav__link> <span class=md-ellipsis> Content </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Interactive MicroSims </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Interactive MicroSims </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../sql-execution-plan/spec/ class=md-nav__link> <span class=md-ellipsis> SQL Execution Plan Visualizer </span> </a> </li> <li class=md-nav__item> <a href=../../git-merge-rebase/spec/ class=md-nav__link> <span class=md-ellipsis> Git Merge vs Rebase </span> </a> </li> <li class=md-nav__item> <a href=../../star-vs-snowflake/spec/ class=md-nav__link> <span class=md-ellipsis> Star vs Snowflake Schema </span> </a> </li> <li class=md-nav__item> <a href=../../normalization-journey/spec/ class=md-nav__link> <span class=md-ellipsis> Database Normalization </span> </a> </li> <li class=md-nav__item> <a href=../../bigquery-partitioning/spec/ class=md-nav__link> <span class=md-ellipsis> BigQuery Partitioning </span> </a> </li> <li class=md-nav__item> <a href=../../scd-timeline/spec/ class=md-nav__link> <span class=md-ellipsis> Slowly Changing Dimensions </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_5> <label class=md-nav__link for=__nav_5 id=__nav_5_label tabindex=0> <span class=md-ellipsis> Resources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=false> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../glossary/ class=md-nav__link> <span class=md-ellipsis> Glossary </span> </a> </li> <li class=md-nav__item> <a href=../../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> <li class=md-nav__item> <a href=../../../learning-graph/learning-graph.json class=md-nav__link> <span class=md-ellipsis> Learning Graph </span> </a> </li> <li class=md-nav__item> <a href=../../../chapters/INDEX/ class=md-nav__link> <span class=md-ellipsis> Quiz Guide </span> </a> </li> <li class=md-nav__item> <a href=../../../chapters/INSTRUCTOR_GUIDE/ class=md-nav__link> <span class=md-ellipsis> Instructor Guide </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> <nav class=md-nav aria-label=Overview> <ul class=md-nav__list> <li class=md-nav__item> <a href=#concept-visualized class=md-nav__link> <span class=md-ellipsis> Concept Visualized </span> </a> </li> <li class=md-nav__item> <a href=#the-aha-moment class=md-nav__link> <span class=md-ellipsis> The "Aha" Moment </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#interface-design class=md-nav__link> <span class=md-ellipsis> Interface Design </span> </a> <nav class=md-nav aria-label="Interface Design"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#layout class=md-nav__link> <span class=md-ellipsis> Layout </span> </a> </li> <li class=md-nav__item> <a href=#controls-right-panel class=md-nav__link> <span class=md-ellipsis> Controls (Right Panel) </span> </a> </li> <li class=md-nav__item> <a href=#visualization-details-left-panel class=md-nav__link> <span class=md-ellipsis> Visualization Details (Left Panel) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#educational-flow class=md-nav__link> <span class=md-ellipsis> Educational Flow </span> </a> <nav class=md-nav aria-label="Educational Flow"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#step-1-default-state class=md-nav__link> <span class=md-ellipsis> Step 1: Default State </span> </a> </li> <li class=md-nav__item> <a href=#step-2-first-interaction-feel-the-cost class=md-nav__link> <span class=md-ellipsis> Step 2: First Interaction - Feel the Cost </span> </a> </li> <li class=md-nav__item> <a href=#step-3-apply-partitioning class=md-nav__link> <span class=md-ellipsis> Step 3: Apply Partitioning </span> </a> </li> <li class=md-nav__item> <a href=#step-4-exploration-partition-granularity-matters class=md-nav__link> <span class=md-ellipsis> Step 4: Exploration - Partition Granularity Matters </span> </a> </li> <li class=md-nav__item> <a href=#step-5-compare-different-query-patterns class=md-nav__link> <span class=md-ellipsis> Step 5: Compare Different Query Patterns </span> </a> </li> <li class=md-nav__item> <a href=#step-6-challenge class=md-nav__link> <span class=md-ellipsis> Step 6: Challenge </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#technical-specification class=md-nav__link> <span class=md-ellipsis> Technical Specification </span> </a> <nav class=md-nav aria-label="Technical Specification"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#technology class=md-nav__link> <span class=md-ellipsis> Technology </span> </a> </li> <li class=md-nav__item> <a href=#implementation-notes class=md-nav__link> <span class=md-ellipsis> Implementation Notes </span> </a> </li> <li class=md-nav__item> <a href=#data-requirements class=md-nav__link> <span class=md-ellipsis> Data Requirements </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#assessment-integration class=md-nav__link> <span class=md-ellipsis> Assessment Integration </span> </a> </li> <li class=md-nav__item> <a href=#extension-ideas-optional class=md-nav__link> <span class=md-ellipsis> Extension Ideas (Optional) </span> </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=microsim-bigquery-partitioning-cost-calculator>MicroSim: BigQuery Partitioning Cost Calculator<a class=headerlink href=#microsim-bigquery-partitioning-cost-calculator title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <h3 id=concept-visualized>Concept Visualized<a class=headerlink href=#concept-visualized title="Permanent link">&para;</a></h3> <ul> <li><strong>Concept:</strong> BigQuery table partitioning strategies and pricing model (data scanned = cost)</li> <li><strong>Learning Goal:</strong> Students will understand how partitioning dramatically reduces query costs in BigQuery by comparing data scanned across different partition strategies for the same analytical queries</li> <li><strong>Difficulty:</strong> Intermediate</li> <li><strong>Chapter:</strong> Week 3-4 - Data Storage &amp; Modeling (BigQuery Introduction)</li> </ul> <h3 id=the-aha-moment>The "Aha" Moment<a class=headerlink href=#the-aha-moment title="Permanent link">&para;</a></h3> <p>When the student runs the query "Get sales for last 7 days" on an unpartitioned 5TB table, they see BigQuery scans all 5TB costing $25. Then they apply daily partitioning and run the same query‚ÄîBigQuery scans only 35GB (7 days of data) costing $0.175. That's a <strong>143x cost reduction</strong> for the exact same result. This demonstrates: <strong>in cloud data warehouses, schema design directly impacts your bill</strong>.</p> <h2 id=interface-design>Interface Design<a class=headerlink href=#interface-design title="Permanent link">&para;</a></h2> <h3 id=layout>Layout<a class=headerlink href=#layout title="Permanent link">&para;</a></h3> <ul> <li><strong>Left Panel (55% width):</strong> Table visualization showing data blocks colored by partition/date</li> <li><strong>Right Panel (45% width):</strong> Controls, query builder, and cost metrics</li> <li><strong>Bottom Status Bar (full width):</strong> Real-time cost calculator and data scanned indicator</li> </ul> <h3 id=controls-right-panel>Controls (Right Panel)<a class=headerlink href=#controls-right-panel title="Permanent link">&para;</a></h3> <table> <thead> <tr> <th>Control</th> <th>Type</th> <th>Range/Options</th> <th>Default</th> <th>Effect on Visualization</th> </tr> </thead> <tbody> <tr> <td>Table Size</td> <td>slider</td> <td>100GB-10TB</td> <td>5TB</td> <td>Scales table visualization and costs proportionally</td> </tr> <tr> <td>Partition Strategy</td> <td>dropdown</td> <td>["None (Unpartitioned)", "Daily", "Monthly", "Yearly", "Custom Range"]</td> <td>"None"</td> <td>Changes how data blocks are organized/colored</td> </tr> <tr> <td>Partition Column</td> <td>dropdown</td> <td>["date", "timestamp", "ingestion_time"]</td> <td>"date"</td> <td>Determines partition key (only if partitioned)</td> </tr> <tr> <td>Clustering</td> <td>checkbox</td> <td>-</td> <td>off</td> <td>Adds clustering within partitions (shows additional optimization)</td> </tr> <tr> <td>Query Preset</td> <td>dropdown</td> <td>["Last 7 Days", "Last Month", "Specific Date", "Year-to-Date", "Full Table Scan"]</td> <td>"Last 7 Days"</td> <td>Loads common query patterns</td> </tr> <tr> <td>Date Range</td> <td>date picker</td> <td>2020-2024</td> <td>last 7 days</td> <td>Filters data range for query</td> </tr> <tr> <td>Run Query</td> <td>button</td> <td>-</td> <td>-</td> <td>Executes query, animates data scan, shows cost</td> </tr> <tr> <td>Compare Strategies</td> <td>button</td> <td>-</td> <td>-</td> <td>Runs same query across all partition strategies side-by-side</td> </tr> </tbody> </table> <p><strong>Additional UI Elements:</strong> - <strong>Query Editor:</strong> Editable SQL text showing current query with WHERE clause - <strong>Cost Breakdown Panel:</strong> Itemized costs (data scanned, on-demand vs flat-rate pricing) - <strong>Best Practice Tips:</strong> Context-sensitive recommendations based on current query - <strong>Historical Queries Log:</strong> Shows past queries with costs (builds over session)</p> <h3 id=visualization-details-left-panel>Visualization Details (Left Panel)<a class=headerlink href=#visualization-details-left-panel title="Permanent link">&para;</a></h3> <p><strong>What is Displayed:</strong></p> <p><strong>Table Representation:</strong> - <strong>Visual Metaphor:</strong> Table shown as grid of "data blocks" (rectangles) - Each block represents a chunk of data (e.g., 1GB) - 5TB table = 5,000 blocks - Arranged in timeline from left (older) to right (newer)</p> <p><strong>Color Coding by Partition Strategy:</strong></p> <p><strong>Unpartitioned (None):</strong> - All blocks same gray color (no organization) - Data appears as monolithic mass - Label: "5TB unpartitioned data"</p> <p><strong>Daily Partitioning:</strong> - Blocks colored by date (gradient from blue to red across time) - Vertical dividers separate days - Labels: "2024-01-15", "2024-01-16", "2024-01-17"... - Each day's data visually grouped</p> <p><strong>Monthly Partitioning:</strong> - Blocks colored by month (12 distinct colors) - Thicker vertical dividers separate months - Labels: "Jan 2024", "Feb 2024"...</p> <p><strong>Yearly Partitioning:</strong> - Blocks colored by year (4-5 distinct colors for multi-year data) - Very thick dividers separate years - Labels: "2020", "2021", "2022"...</p> <p><strong>Query Execution Visualization:</strong> - When query runs, animation highlights which blocks are scanned - <strong>Unpartitioned:</strong> All blocks highlight yellow (full table scan) - <strong>Partitioned:</strong> Only relevant partition blocks highlight green (pruned scan) - Non-scanned blocks fade to 20% opacity (showing pruning effectiveness) - Progress bar shows percentage of table scanned</p> <p><strong>Additional Visual Elements:</strong> - <strong>Partition Pruning Indicator:</strong> Scissors icon appears when partitions are eliminated - <strong>Data Scanned Bar:</strong> Horizontal bar below table showing proportion: "35GB / 5TB (0.7%)" - <strong>Cost Meter:</strong> Thermometer visualization filling from green (<span class=arithmatex>\(0) to red (\)</span>50+)</p> <p><strong>How it Updates:</strong></p> <p><strong>When "Partition Strategy" dropdown changes:</strong> 1. Table blocks animate rearranging (500ms) 2. Colors transition to new partition scheme (800ms) 3. Partition dividers appear/disappear 4. Labels update to show partition boundaries 5. Info panel explains chosen strategy: "Daily partitioning creates 365 partitions per year. Queries filtering by date scan only relevant days."</p> <p><strong>When "Run Query" button clicked:</strong> 1. Query text highlights WHERE clause (300ms) 2. System calculates matching partitions (shown in right panel): - "Date filter: 2024-01-15 to 2024-01-21" - "Partitions matched: 7" - "Partitions scanned: 7 / 1,825 (0.4%)" 3. Table visualization animation (2 seconds): - Matching partition blocks pulse yellow - Non-matching blocks fade to 20% opacity - Data flow animation: selected blocks ‚Üí query processor icon - Progress counter increments: "Scanning 35GB..." 4. Results panel appears: - "Data scanned: 35GB" - "Cost: $0.175 (on-demand pricing)" - "Execution time: 3.2s" - Comparison badge: "143x cheaper than unpartitioned!"</p> <p><strong>When "Compare Strategies" button clicked:</strong> - Screen splits into 4 quadrants showing same query with: 1. No partitioning: Scans 5TB, costs $25 2. Daily partitioning: Scans 35GB, costs $0.175 3. Monthly partitioning: Scans 155GB (entire January), costs $0.775 4. Yearly partitioning: Scans 1.8TB (entire 2024), costs $9 - Bar chart appears comparing costs - Winner highlighted in green with crown icon</p> <p><strong>Visual Feedback:</strong> - Hover over data blocks: Tooltip shows partition details ("Partition: 2024-01-15, Size: 5GB, Rows: 2.1M") - Hover over query: Highlights partition column in WHERE clause - Cost meter changes color: &lt;$1 green, <span class=arithmatex>\(1-\)</span>10 yellow, &gt;$10 red - Optimization suggestions appear: "üí° Daily partitioning recommended for queries filtering by date"</p> <h2 id=educational-flow>Educational Flow<a class=headerlink href=#educational-flow title="Permanent link">&para;</a></h2> <h3 id=step-1-default-state>Step 1: Default State<a class=headerlink href=#step-1-default-state title="Permanent link">&para;</a></h3> <p>Student sees <strong>unpartitioned 5TB sales table</strong> with sample schema: <div class="language-sql highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>CREATE</span><span class=w> </span><span class=k>TABLE</span><span class=w> </span><span class=n>sales</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=n>order_id</span><span class=w> </span><span class=n>INT64</span><span class=p>,</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class=n>customer_id</span><span class=w> </span><span class=n>INT64</span><span class=p>,</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>  </span><span class=n>product_id</span><span class=w> </span><span class=n>INT64</span><span class=p>,</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>  </span><span class=n>order_date</span><span class=w> </span><span class=nb>DATE</span><span class=p>,</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>  </span><span class=n>order_timestamp</span><span class=w> </span><span class=k>TIMESTAMP</span><span class=p>,</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>  </span><span class=n>amount</span><span class=w> </span><span class=n>FLOAT64</span>
</span><span id=__span-0-8><a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=p>)</span>
</span></code></pre></div></p> <p>Query preset: <strong>"Last 7 Days"</strong> <div class="language-sql highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=k>SELECT</span><span class=w> </span><span class=o>*</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=k>FROM</span><span class=w> </span><span class=n>sales</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=k>WHERE</span><span class=w> </span><span class=n>order_date</span><span class=w> </span><span class=o>&gt;=</span><span class=w> </span><span class=s1>&#39;2024-01-15&#39;</span><span class=w> </span><span class=k>AND</span><span class=w> </span><span class=n>order_date</span><span class=w> </span><span class=o>&lt;=</span><span class=w> </span><span class=s1>&#39;2024-01-21&#39;</span>
</span></code></pre></div></p> <p>Info panel explains: "This table contains 3 years of sales data (5TB). Let's see how much it costs to query one week of data."</p> <p>This shows the baseline: no optimization.</p> <h3 id=step-2-first-interaction-feel-the-cost>Step 2: First Interaction - Feel the Cost<a class=headerlink href=#step-2-first-interaction-feel-the-cost title="Permanent link">&para;</a></h3> <p><strong>Prompt:</strong> "Click 'Run Query' to see how BigQuery processes this query."</p> <p>Student clicks Run Query.</p> <p><strong>Result:</strong> - Animation shows ALL data blocks highlighting yellow (full table scan) - Progress bar: "Scanning 5,000GB... 10%... 50%... 100%" - Results panel: - <strong>Data scanned: 5TB</strong> - <strong>Cost: $25.00</strong> (at $5 per TB) - <strong>Execution time: 45 seconds</strong> - ‚ö†Ô∏è "Warning: This query scanned 5TB to return 7 days of data!"</p> <p><strong>Info panel explains:</strong> "Without partitioning, BigQuery must scan every row to find matching dates. Even though you only want 7 days, it reads 3 years. You pay for all 5TB scanned."</p> <p><strong>Prompt:</strong> "That's $25 for one query! If your dashboard runs this every 5 minutes (288 times/day), that's $7,200/day = $216,000/month. Let's fix this with partitioning."</p> <p><strong>What it teaches:</strong> Cloud data warehouse costs are based on data scanned, not returned. Poor schema design = expensive queries.</p> <h3 id=step-3-apply-partitioning>Step 3: Apply Partitioning<a class=headerlink href=#step-3-apply-partitioning title="Permanent link">&para;</a></h3> <p><strong>Prompt:</strong> "Change 'Partition Strategy' to 'Daily' and run the same query again."</p> <p>Student selects "Daily" from dropdown.</p> <p><strong>Visual change:</strong> - Table blocks rearrange into daily partitions (animation) - Color gradient appears (blue = older, red = newer) - Partition labels appear: "2021-01-01", "2021-01-02"... "2024-01-21" - Partition count badge: "1,095 partitions"</p> <p><strong>Info panel explains:</strong> "Daily partitioning creates one partition per day. BigQuery stores partition metadata and uses it to eliminate partitions during queries. Your WHERE clause <code>order_date &gt;= '2024-01-15'</code> allows BigQuery to skip 1,088 partitions!"</p> <p><strong>Prompt:</strong> "Now click 'Run Query' again."</p> <p>Student clicks Run Query.</p> <p><strong>Result:</strong> - Animation shows ONLY 7 daily partition blocks highlighting green (2024-01-15 through 2024-01-21) - Other 1,088 partitions fade to 20% opacity with "‚úÇÔ∏è Pruned" label - Progress bar: "Scanning 35GB... (partitions pruned!)" - Results panel: - <strong>Data scanned: 35GB</strong> (7 days √ó 5GB per day) - <strong>Cost: $0.175</strong> - <strong>Execution time: 3.2 seconds</strong> - ‚úÖ "Optimized: Partition pruning saved $24.82 (99.3% reduction)!" - Badge: "143x cheaper than unpartitioned"</p> <p><strong>Cost comparison tooltip:</strong> "$25.00 ‚Üí $0.175 saved $24.82 per query. At 288 queries/day: saved $7,148/day = $214,440/month!"</p> <p><strong>What it teaches:</strong> Partitioning uses metadata to skip irrelevant data, dramatically reducing costs. Proper partitioning can save 99%+ on costs for filtered queries.</p> <h3 id=step-4-exploration-partition-granularity-matters>Step 4: Exploration - Partition Granularity Matters<a class=headerlink href=#step-4-exploration-partition-granularity-matters title="Permanent link">&para;</a></h3> <p><strong>Prompt:</strong> "Try different partition strategies (Monthly, Yearly) and compare costs. Which is best?"</p> <p><strong>Student experiments:</strong></p> <p><strong>Monthly Partitioning:</strong> - Query for last 7 days (Jan 15-21) must scan entire January partition - Data scanned: 155GB (31 days) - Cost: $0.775 - Lesson: Too coarse‚Äîscans 4.4x more data than necessary</p> <p><strong>Yearly Partitioning:</strong> - Query for last 7 days must scan entire 2024 partition - Data scanned: 1.8TB (365 days so far) - Cost: $9.00 - Lesson: Way too coarse‚Äîscans 51x more data than necessary</p> <p><strong>Daily Partitioning (revisited):</strong> - Scans exactly 7 days needed - Cost: $0.175 - Lesson: Optimal granularity for this query pattern</p> <p><strong>Key insight:</strong> Partition granularity should match query filter granularity. If queries typically filter by day/week, use daily partitioning. If queries filter by month, monthly partitioning is appropriate.</p> <p><strong>Info panel explains:</strong> "Daily partitioning has 365x more partitions than yearly, but each partition is 365x smaller. BigQuery partition metadata is extremely lightweight (free to store), so finer partitioning is almost always better for reducing costs."</p> <h3 id=step-5-compare-different-query-patterns>Step 5: Compare Different Query Patterns<a class=headerlink href=#step-5-compare-different-query-patterns title="Permanent link">&para;</a></h3> <p><strong>Prompt:</strong> "Switch query preset to 'Full Table Scan' (e.g., calculating lifetime totals). Does partitioning still help?"</p> <p>Student selects "Full Table Scan" preset: <div class="language-sql highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=k>SELECT</span><span class=w> </span><span class=k>SUM</span><span class=p>(</span><span class=n>amount</span><span class=p>)</span><span class=w> </span><span class=k>AS</span><span class=w> </span><span class=n>total_revenue</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=k>FROM</span><span class=w> </span><span class=n>sales</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=c1>-- No WHERE clause</span>
</span></code></pre></div></p> <p>Student runs query with daily partitioning.</p> <p><strong>Result:</strong> - All 1,095 partitions highlight (no pruning possible) - Data scanned: 5TB (entire table) - Cost: $25.00 - Info: "Partitioning doesn't help queries without partition column filters"</p> <p><strong>Key insight:</strong> Partitioning only helps queries that filter on partition column. For full table scans, partition strategy doesn't matter. Must design partitions based on common query patterns.</p> <h3 id=step-6-challenge>Step 6: Challenge<a class=headerlink href=#step-6-challenge title="Permanent link">&para;</a></h3> <p><strong>Present scenario:</strong> "You're designing a BigQuery table for IoT sensor data: - 1 billion events per day - 500GB uncompressed data per day - Table will contain 2 years of data = 365TB total - Common queries: - Dashboard: Show last 24 hours of data (refreshes every 5 minutes) - Weekly reports: Analyze last 7 days by sensor type - Monthly aggregations: Calculate monthly totals per device - Ad-hoc analyses: Engineers query arbitrary date ranges</p> <p>Your company has $5,000/month BigQuery budget. Design the optimal partitioning strategy."</p> <p><strong>Interactive Challenge:</strong> Student must: 1. Choose partition strategy 2. Choose partition column (ingestion_time vs event_timestamp) 3. Decide whether to add clustering 4. Test with sample queries</p> <p><strong>Simulator shows:</strong> - Dashboard query (last 24h) runs 8,640 times/month: - Unpartitioned: 365TB √ó 8,640 = <strong><span class=arithmatex>\(15.8M/month** üî¥ - Daily partitioned: 0.5TB √ó 8,640 = **\)</span>21,600/month</strong> üü° - Hourly partitioned: 21GB √ó 8,640 = <strong>$907/month</strong> ‚úÖ</p> <p><strong>Expected solution:</strong> - <strong>Partition:</strong> Daily or hourly on ingestion_time (ingestion_time is better than event_timestamp due to late-arriving data) - <strong>Clustering:</strong> Add clustering on sensor_id and sensor_type (helps "by sensor type" queries) - <strong>Result:</strong> Total cost ~$2,800/month (well under budget)</p> <p><strong>Advanced considerations shown:</strong> - "Hourly partitioning creates 17,520 partitions/year. BigQuery has 4,000 partition limit per table. Use partition expiration or switch to daily + clustering." - "Consider BigQuery flat-rate pricing ($20,000/month) if your workload exceeds $6,000/month on-demand."</p> <p><strong>Expected learning:</strong> Students understand how to calculate costs, choose partition granularity based on query patterns, and recognize partition limits and alternative pricing models.</p> <h2 id=technical-specification>Technical Specification<a class=headerlink href=#technical-specification title="Permanent link">&para;</a></h2> <h3 id=technology>Technology<a class=headerlink href=#technology title="Permanent link">&para;</a></h3> <ul> <li><strong>Library:</strong> p5.js for table block visualization and animations</li> <li><strong>Canvas:</strong> Responsive, min 700px width √ó 500px height</li> <li><strong>Frame Rate:</strong> 60fps for smooth scanning animations</li> <li><strong>Data:</strong> Partition metadata and cost formulas defined in JSON</li> </ul> <h3 id=implementation-notes>Implementation Notes<a class=headerlink href=#implementation-notes title="Permanent link">&para;</a></h3> <p><strong>Mobile Considerations:</strong> - Screens &lt; 768px: Stack left/right panels vertically - Table blocks: Show representative sample (e.g., 100 blocks) instead of 5,000 on small screens - Touch-friendly: Large buttons, swipeable query presets - Simplified animations (instant pruning highlight instead of gradual fade)</p> <p><strong>Accessibility:</strong> - Keyboard navigation: - Tab through controls - Arrow keys to adjust date range - Enter to run query - Escape to clear results - Screen reader announces: - Partition strategy: "Daily partitioning selected. 1,095 partitions created based on order_date column." - Query execution: "Query started. Scanning 35 gigabytes across 7 partitions. 1,088 partitions pruned. Cost: 17 cents. Query completed." - Cost comparison: "143 times cheaper than unpartitioned. Savings: $24.82 per query." - High contrast mode: Bold partition boundaries, distinct colors for scanned vs pruned - Text alternatives: Cost table showing all metrics in accessible format</p> <p><strong>Performance:</strong> - For large tables (&gt;1TB), show representative visualization (e.g., 1 block = 10GB) - Use canvas instancing for rendering thousands of identical blocks - Debounce slider changes (500ms before recalculating) - Precompute partition metadata for instant lookups during query execution</p> <h3 id=data-requirements>Data Requirements<a class=headerlink href=#data-requirements title="Permanent link">&para;</a></h3> <p><strong>Table Metadata (JSON format):</strong></p> <div class="language-json highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=p>{</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nt>&quot;table&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;sales&quot;</span><span class=p>,</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>    </span><span class=nt>&quot;size_bytes&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5497558138880</span><span class=p>,</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>    </span><span class=nt>&quot;size_human&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;5TB&quot;</span><span class=p>,</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>    </span><span class=nt>&quot;row_count&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>2190000000</span><span class=p>,</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>    </span><span class=nt>&quot;date_range&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>      </span><span class=nt>&quot;start&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2021-01-01&quot;</span><span class=p>,</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=w>      </span><span class=nt>&quot;end&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;2024-01-21&quot;</span>
</span><span id=__span-3-10><a id=__codelineno-3-10 name=__codelineno-3-10 href=#__codelineno-3-10></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-3-11><a id=__codelineno-3-11 name=__codelineno-3-11 href=#__codelineno-3-11></a><span class=w>    </span><span class=nt>&quot;schema&quot;</span><span class=p>:</span><span class=w> </span><span class=p>[</span>
</span><span id=__span-3-12><a id=__codelineno-3-12 name=__codelineno-3-12 href=#__codelineno-3-12></a><span class=w>      </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;order_id&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;INT64&quot;</span><span class=p>},</span>
</span><span id=__span-3-13><a id=__codelineno-3-13 name=__codelineno-3-13 href=#__codelineno-3-13></a><span class=w>      </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;customer_id&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;INT64&quot;</span><span class=p>},</span>
</span><span id=__span-3-14><a id=__codelineno-3-14 name=__codelineno-3-14 href=#__codelineno-3-14></a><span class=w>      </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;product_id&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;INT64&quot;</span><span class=p>},</span>
</span><span id=__span-3-15><a id=__codelineno-3-15 name=__codelineno-3-15 href=#__codelineno-3-15></a><span class=w>      </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;order_date&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;DATE&quot;</span><span class=p>},</span>
</span><span id=__span-3-16><a id=__codelineno-3-16 name=__codelineno-3-16 href=#__codelineno-3-16></a><span class=w>      </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;order_timestamp&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;TIMESTAMP&quot;</span><span class=p>},</span>
</span><span id=__span-3-17><a id=__codelineno-3-17 name=__codelineno-3-17 href=#__codelineno-3-17></a><span class=w>      </span><span class=p>{</span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;amount&quot;</span><span class=p>,</span><span class=w> </span><span class=nt>&quot;type&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;FLOAT64&quot;</span><span class=p>}</span>
</span><span id=__span-3-18><a id=__codelineno-3-18 name=__codelineno-3-18 href=#__codelineno-3-18></a><span class=w>    </span><span class=p>]</span>
</span><span id=__span-3-19><a id=__codelineno-3-19 name=__codelineno-3-19 href=#__codelineno-3-19></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-3-20><a id=__codelineno-3-20 name=__codelineno-3-20 href=#__codelineno-3-20></a><span class=w>  </span><span class=nt>&quot;partition_strategies&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-21><a id=__codelineno-3-21 name=__codelineno-3-21 href=#__codelineno-3-21></a><span class=w>    </span><span class=nt>&quot;none&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-22><a id=__codelineno-3-22 name=__codelineno-3-22 href=#__codelineno-3-22></a><span class=w>      </span><span class=nt>&quot;partitions&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>,</span>
</span><span id=__span-3-23><a id=__codelineno-3-23 name=__codelineno-3-23 href=#__codelineno-3-23></a><span class=w>      </span><span class=nt>&quot;partition_size_avg_gb&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>5000</span><span class=p>,</span>
</span><span id=__span-3-24><a id=__codelineno-3-24 name=__codelineno-3-24 href=#__codelineno-3-24></a><span class=w>      </span><span class=nt>&quot;metadata_cost&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span>
</span><span id=__span-3-25><a id=__codelineno-3-25 name=__codelineno-3-25 href=#__codelineno-3-25></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-3-26><a id=__codelineno-3-26 name=__codelineno-3-26 href=#__codelineno-3-26></a><span class=w>    </span><span class=nt>&quot;daily&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-27><a id=__codelineno-3-27 name=__codelineno-3-27 href=#__codelineno-3-27></a><span class=w>      </span><span class=nt>&quot;partitions&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1095</span><span class=p>,</span>
</span><span id=__span-3-28><a id=__codelineno-3-28 name=__codelineno-3-28 href=#__codelineno-3-28></a><span class=w>      </span><span class=nt>&quot;partition_size_avg_gb&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>4.57</span><span class=p>,</span>
</span><span id=__span-3-29><a id=__codelineno-3-29 name=__codelineno-3-29 href=#__codelineno-3-29></a><span class=w>      </span><span class=nt>&quot;metadata_cost&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.00</span>
</span><span id=__span-3-30><a id=__codelineno-3-30 name=__codelineno-3-30 href=#__codelineno-3-30></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-3-31><a id=__codelineno-3-31 name=__codelineno-3-31 href=#__codelineno-3-31></a><span class=w>    </span><span class=nt>&quot;monthly&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-32><a id=__codelineno-3-32 name=__codelineno-3-32 href=#__codelineno-3-32></a><span class=w>      </span><span class=nt>&quot;partitions&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>36</span><span class=p>,</span>
</span><span id=__span-3-33><a id=__codelineno-3-33 name=__codelineno-3-33 href=#__codelineno-3-33></a><span class=w>      </span><span class=nt>&quot;partition_size_avg_gb&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>138.89</span><span class=p>,</span>
</span><span id=__span-3-34><a id=__codelineno-3-34 name=__codelineno-3-34 href=#__codelineno-3-34></a><span class=w>      </span><span class=nt>&quot;metadata_cost&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span>
</span><span id=__span-3-35><a id=__codelineno-3-35 name=__codelineno-3-35 href=#__codelineno-3-35></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-3-36><a id=__codelineno-3-36 name=__codelineno-3-36 href=#__codelineno-3-36></a><span class=w>    </span><span class=nt>&quot;yearly&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-37><a id=__codelineno-3-37 name=__codelineno-3-37 href=#__codelineno-3-37></a><span class=w>      </span><span class=nt>&quot;partitions&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>3</span><span class=p>,</span>
</span><span id=__span-3-38><a id=__codelineno-3-38 name=__codelineno-3-38 href=#__codelineno-3-38></a><span class=w>      </span><span class=nt>&quot;partition_size_avg_gb&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>1666.67</span><span class=p>,</span>
</span><span id=__span-3-39><a id=__codelineno-3-39 name=__codelineno-3-39 href=#__codelineno-3-39></a><span class=w>      </span><span class=nt>&quot;metadata_cost&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span>
</span><span id=__span-3-40><a id=__codelineno-3-40 name=__codelineno-3-40 href=#__codelineno-3-40></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-3-41><a id=__codelineno-3-41 name=__codelineno-3-41 href=#__codelineno-3-41></a><span class=w>    </span><span class=nt>&quot;hourly&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-42><a id=__codelineno-3-42 name=__codelineno-3-42 href=#__codelineno-3-42></a><span class=w>      </span><span class=nt>&quot;partitions&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>26280</span><span class=p>,</span>
</span><span id=__span-3-43><a id=__codelineno-3-43 name=__codelineno-3-43 href=#__codelineno-3-43></a><span class=w>      </span><span class=nt>&quot;partition_size_avg_gb&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.19</span><span class=p>,</span>
</span><span id=__span-3-44><a id=__codelineno-3-44 name=__codelineno-3-44 href=#__codelineno-3-44></a><span class=w>      </span><span class=nt>&quot;metadata_cost&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>0</span><span class=p>,</span>
</span><span id=__span-3-45><a id=__codelineno-3-45 name=__codelineno-3-45 href=#__codelineno-3-45></a><span class=w>      </span><span class=nt>&quot;note&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Exceeds 4,000 partition limit. Requires partition expiration.&quot;</span>
</span><span id=__span-3-46><a id=__codelineno-3-46 name=__codelineno-3-46 href=#__codelineno-3-46></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-3-47><a id=__codelineno-3-47 name=__codelineno-3-47 href=#__codelineno-3-47></a><span class=w>  </span><span class=p>},</span>
</span><span id=__span-3-48><a id=__codelineno-3-48 name=__codelineno-3-48 href=#__codelineno-3-48></a><span class=w>  </span><span class=nt>&quot;pricing&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-49><a id=__codelineno-3-49 name=__codelineno-3-49 href=#__codelineno-3-49></a><span class=w>    </span><span class=nt>&quot;on_demand_per_tb&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>5.00</span><span class=p>,</span>
</span><span id=__span-3-50><a id=__codelineno-3-50 name=__codelineno-3-50 href=#__codelineno-3-50></a><span class=w>    </span><span class=nt>&quot;flat_rate_monthly&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>20000</span><span class=p>,</span>
</span><span id=__span-3-51><a id=__codelineno-3-51 name=__codelineno-3-51 href=#__codelineno-3-51></a><span class=w>    </span><span class=nt>&quot;storage_per_gb_month&quot;</span><span class=p>:</span><span class=w> </span><span class=mf>0.02</span><span class=p>,</span>
</span><span id=__span-3-52><a id=__codelineno-3-52 name=__codelineno-3-52 href=#__codelineno-3-52></a><span class=w>    </span><span class=nt>&quot;free_tier_monthly_gb&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>10240</span>
</span><span id=__span-3-53><a id=__codelineno-3-53 name=__codelineno-3-53 href=#__codelineno-3-53></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-3-54><a id=__codelineno-3-54 name=__codelineno-3-54 href=#__codelineno-3-54></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Query Presets:</strong> <div class="language-json highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=p>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nt>&quot;query_presets&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>    </span><span class=nt>&quot;last_7_days&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Last 7 Days&quot;</span><span class=p>,</span>
</span><span id=__span-4-5><a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>      </span><span class=nt>&quot;sql&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SELECT * FROM sales WHERE order_date &gt;= DATE_SUB(CURRENT_DATE(), INTERVAL 7 DAY)&quot;</span><span class=p>,</span>
</span><span id=__span-4-6><a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>      </span><span class=nt>&quot;date_filter&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;days&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>7</span><span class=p>},</span>
</span><span id=__span-4-7><a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Common dashboard query&quot;</span>
</span><span id=__span-4-8><a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-4-9><a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a><span class=w>    </span><span class=nt>&quot;last_month&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-10><a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Last Month&quot;</span><span class=p>,</span>
</span><span id=__span-4-11><a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>      </span><span class=nt>&quot;sql&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SELECT * FROM sales WHERE order_date &gt;= DATE_SUB(CURRENT_DATE(), INTERVAL 1 MONTH)&quot;</span><span class=p>,</span>
</span><span id=__span-4-12><a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=w>      </span><span class=nt>&quot;date_filter&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;days&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>30</span><span class=p>},</span>
</span><span id=__span-4-13><a id=__codelineno-4-13 name=__codelineno-4-13 href=#__codelineno-4-13></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Monthly reporting&quot;</span>
</span><span id=__span-4-14><a id=__codelineno-4-14 name=__codelineno-4-14 href=#__codelineno-4-14></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-4-15><a id=__codelineno-4-15 name=__codelineno-4-15 href=#__codelineno-4-15></a><span class=w>    </span><span class=nt>&quot;specific_date&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-16><a id=__codelineno-4-16 name=__codelineno-4-16 href=#__codelineno-4-16></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Specific Date&quot;</span><span class=p>,</span>
</span><span id=__span-4-17><a id=__codelineno-4-17 name=__codelineno-4-17 href=#__codelineno-4-17></a><span class=w>      </span><span class=nt>&quot;sql&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SELECT * FROM sales WHERE order_date = &#39;2024-01-15&#39;&quot;</span><span class=p>,</span>
</span><span id=__span-4-18><a id=__codelineno-4-18 name=__codelineno-4-18 href=#__codelineno-4-18></a><span class=w>      </span><span class=nt>&quot;date_filter&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;days&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>1</span><span class=p>},</span>
</span><span id=__span-4-19><a id=__codelineno-4-19 name=__codelineno-4-19 href=#__codelineno-4-19></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Single day analysis&quot;</span>
</span><span id=__span-4-20><a id=__codelineno-4-20 name=__codelineno-4-20 href=#__codelineno-4-20></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-4-21><a id=__codelineno-4-21 name=__codelineno-4-21 href=#__codelineno-4-21></a><span class=w>    </span><span class=nt>&quot;year_to_date&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-22><a id=__codelineno-4-22 name=__codelineno-4-22 href=#__codelineno-4-22></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Year-to-Date&quot;</span><span class=p>,</span>
</span><span id=__span-4-23><a id=__codelineno-4-23 name=__codelineno-4-23 href=#__codelineno-4-23></a><span class=w>      </span><span class=nt>&quot;sql&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SELECT * FROM sales WHERE order_date &gt;= &#39;2024-01-01&#39;&quot;</span><span class=p>,</span>
</span><span id=__span-4-24><a id=__codelineno-4-24 name=__codelineno-4-24 href=#__codelineno-4-24></a><span class=w>      </span><span class=nt>&quot;date_filter&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span><span class=nt>&quot;days&quot;</span><span class=p>:</span><span class=w> </span><span class=mi>21</span><span class=p>},</span>
</span><span id=__span-4-25><a id=__codelineno-4-25 name=__codelineno-4-25 href=#__codelineno-4-25></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;YTD aggregations&quot;</span>
</span><span id=__span-4-26><a id=__codelineno-4-26 name=__codelineno-4-26 href=#__codelineno-4-26></a><span class=w>    </span><span class=p>},</span>
</span><span id=__span-4-27><a id=__codelineno-4-27 name=__codelineno-4-27 href=#__codelineno-4-27></a><span class=w>    </span><span class=nt>&quot;full_table&quot;</span><span class=p>:</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-28><a id=__codelineno-4-28 name=__codelineno-4-28 href=#__codelineno-4-28></a><span class=w>      </span><span class=nt>&quot;name&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Full Table Scan&quot;</span><span class=p>,</span>
</span><span id=__span-4-29><a id=__codelineno-4-29 name=__codelineno-4-29 href=#__codelineno-4-29></a><span class=w>      </span><span class=nt>&quot;sql&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;SELECT SUM(amount) FROM sales&quot;</span><span class=p>,</span>
</span><span id=__span-4-30><a id=__codelineno-4-30 name=__codelineno-4-30 href=#__codelineno-4-30></a><span class=w>      </span><span class=nt>&quot;date_filter&quot;</span><span class=p>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
</span><span id=__span-4-31><a id=__codelineno-4-31 name=__codelineno-4-31 href=#__codelineno-4-31></a><span class=w>      </span><span class=nt>&quot;description&quot;</span><span class=p>:</span><span class=w> </span><span class=s2>&quot;Lifetime calculations&quot;</span>
</span><span id=__span-4-32><a id=__codelineno-4-32 name=__codelineno-4-32 href=#__codelineno-4-32></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-4-33><a id=__codelineno-4-33 name=__codelineno-4-33 href=#__codelineno-4-33></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-4-34><a id=__codelineno-4-34 name=__codelineno-4-34 href=#__codelineno-4-34></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Cost Calculation Logic:</strong> <div class="language-javascript highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kd>function</span><span class=w> </span><span class=nx>calculateQueryCost</span><span class=p>(</span><span class=nx>tableSizeGB</span><span class=p>,</span><span class=w> </span><span class=nx>partitionStrategy</span><span class=p>,</span><span class=w> </span><span class=nx>queryDateFilter</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>onDemandRate</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>5.00</span><span class=p>;</span><span class=w> </span><span class=c1>// $ per TB</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>queryDateFilter</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>    </span><span class=c1>// Full table scan</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>      </span><span class=nx>dataScannedGB</span><span class=o>:</span><span class=w> </span><span class=nx>tableSizeGB</span><span class=p>,</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>      </span><span class=nx>cost</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>tableSizeGB</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>1024</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>onDemandRate</span><span class=p>,</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>      </span><span class=nx>partitionsPruned</span><span class=o>:</span><span class=w> </span><span class=mf>0</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=w>    </span><span class=p>};</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>  </span><span class=c1>// Calculate partitions scanned based on strategy</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>daysQueried</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>queryDateFilter</span><span class=p>.</span><span class=nx>days</span><span class=p>;</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>dataScannedGB</span><span class=p>;</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=w>  </span><span class=k>switch</span><span class=p>(</span><span class=nx>partitionStrategy</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-18><a id=__codelineno-5-18 name=__codelineno-5-18 href=#__codelineno-5-18></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;daily&#39;</span><span class=o>:</span>
</span><span id=__span-5-19><a id=__codelineno-5-19 name=__codelineno-5-19 href=#__codelineno-5-19></a><span class=w>      </span><span class=nx>dataScannedGB</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>tableSizeGB</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>1095</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>daysQueried</span><span class=p>;</span>
</span><span id=__span-5-20><a id=__codelineno-5-20 name=__codelineno-5-20 href=#__codelineno-5-20></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-5-21><a id=__codelineno-5-21 name=__codelineno-5-21 href=#__codelineno-5-21></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;monthly&#39;</span><span class=o>:</span>
</span><span id=__span-5-22><a id=__codelineno-5-22 name=__codelineno-5-22 href=#__codelineno-5-22></a><span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>monthsQueried</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>ceil</span><span class=p>(</span><span class=nx>daysQueried</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>30</span><span class=p>);</span>
</span><span id=__span-5-23><a id=__codelineno-5-23 name=__codelineno-5-23 href=#__codelineno-5-23></a><span class=w>      </span><span class=nx>dataScannedGB</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>tableSizeGB</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>36</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>monthsQueried</span><span class=p>;</span>
</span><span id=__span-5-24><a id=__codelineno-5-24 name=__codelineno-5-24 href=#__codelineno-5-24></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-5-25><a id=__codelineno-5-25 name=__codelineno-5-25 href=#__codelineno-5-25></a><span class=w>    </span><span class=k>case</span><span class=w> </span><span class=s1>&#39;yearly&#39;</span><span class=o>:</span>
</span><span id=__span-5-26><a id=__codelineno-5-26 name=__codelineno-5-26 href=#__codelineno-5-26></a><span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>yearsQueried</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nb>Math</span><span class=p>.</span><span class=nx>ceil</span><span class=p>(</span><span class=nx>daysQueried</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>365</span><span class=p>);</span>
</span><span id=__span-5-27><a id=__codelineno-5-27 name=__codelineno-5-27 href=#__codelineno-5-27></a><span class=w>      </span><span class=nx>dataScannedGB</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=nx>tableSizeGB</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>3</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>yearsQueried</span><span class=p>;</span>
</span><span id=__span-5-28><a id=__codelineno-5-28 name=__codelineno-5-28 href=#__codelineno-5-28></a><span class=w>      </span><span class=k>break</span><span class=p>;</span>
</span><span id=__span-5-29><a id=__codelineno-5-29 name=__codelineno-5-29 href=#__codelineno-5-29></a><span class=w>    </span><span class=k>default</span><span class=o>:</span><span class=w> </span><span class=c1>// unpartitioned</span>
</span><span id=__span-5-30><a id=__codelineno-5-30 name=__codelineno-5-30 href=#__codelineno-5-30></a><span class=w>      </span><span class=nx>dataScannedGB</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>tableSizeGB</span><span class=p>;</span>
</span><span id=__span-5-31><a id=__codelineno-5-31 name=__codelineno-5-31 href=#__codelineno-5-31></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-5-32><a id=__codelineno-5-32 name=__codelineno-5-32 href=#__codelineno-5-32></a>
</span><span id=__span-5-33><a id=__codelineno-5-33 name=__codelineno-5-33 href=#__codelineno-5-33></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-34><a id=__codelineno-5-34 name=__codelineno-5-34 href=#__codelineno-5-34></a><span class=w>    </span><span class=nx>dataScannedGB</span><span class=o>:</span><span class=w> </span><span class=nx>dataScannedGB</span><span class=p>,</span>
</span><span id=__span-5-35><a id=__codelineno-5-35 name=__codelineno-5-35 href=#__codelineno-5-35></a><span class=w>    </span><span class=nx>cost</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>dataScannedGB</span><span class=w> </span><span class=o>/</span><span class=w> </span><span class=mf>1024</span><span class=p>)</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>onDemandRate</span><span class=p>,</span>
</span><span id=__span-5-36><a id=__codelineno-5-36 name=__codelineno-5-36 href=#__codelineno-5-36></a><span class=w>    </span><span class=nx>partitionsPruned</span><span class=o>:</span><span class=w> </span><span class=nx>calculatePartitionsPruned</span><span class=p>(</span><span class=nx>partitionStrategy</span><span class=p>,</span><span class=w> </span><span class=nx>daysQueried</span><span class=p>)</span>
</span><span id=__span-5-37><a id=__codelineno-5-37 name=__codelineno-5-37 href=#__codelineno-5-37></a><span class=w>  </span><span class=p>};</span>
</span><span id=__span-5-38><a id=__codelineno-5-38 name=__codelineno-5-38 href=#__codelineno-5-38></a><span class=p>}</span>
</span></code></pre></div></p> <h2 id=assessment-integration>Assessment Integration<a class=headerlink href=#assessment-integration title="Permanent link">&para;</a></h2> <p>After using this MicroSim, students should be able to answer:</p> <ol> <li><strong>Quiz Question:</strong> "BigQuery charges $5 per TB of data scanned. A query scans 250GB. What is the cost?"</li> <li>A) $0.25</li> <li>B) $1.25 ‚úì</li> <li>C) $5.00</li> <li>D) $25.00</li> </ol> <p>(Calculation: 250GB / 1024GB per TB √ó $5 = $1.22, rounded to $1.25)</p> <ol> <li><strong>Conceptual Question:</strong> "Why does partitioning reduce query costs in BigQuery, but not in traditional databases like PostgreSQL?"</li> <li> <p>Expected answer: BigQuery uses columnar storage and charges based on data scanned. Partitioning allows partition pruning‚Äîskipping entire partitions based on metadata, reducing data scanned and thus cost. Traditional databases charge based on compute time or don't separate storage/compute costs, so partitioning helps performance but doesn't directly reduce costs.</p> </li> <li> <p><strong>Design Question:</strong> "You have a 10TB table with queries that filter by user_id (10M unique users). Would partitioning on user_id reduce costs? Why or why not?"</p> </li> <li> <p>Expected answer: No. BigQuery only supports partitioning on DATE, TIMESTAMP, DATETIME, or INTEGER (limited range). user_id with 10M values would create too many partitions (4,000 limit). Instead, use <strong>clustering</strong> on user_id, which sorts data without partition metadata and still improves filtering performance.</p> </li> <li> <p><strong>Scenario Question:</strong> "Your daily dashboard query scans 2TB and costs $10. It runs every 5 minutes (288 times/day = $2,880/day). You have a $10,000/month budget. What are your options?"</p> </li> <li>Expected answer:<ul> <li><strong>Option 1:</strong> Optimize with partitioning/clustering to reduce data scanned (best)</li> <li><strong>Option 2:</strong> Switch to BigQuery flat-rate pricing ($20,000/month for unlimited queries, not viable with $10K budget)</li> <li><strong>Option 3:</strong> Cache results (BI Engine or materialized views) to avoid repeated scans</li> <li><strong>Option 4:</strong> Reduce query frequency (dashboard refreshes every 30 minutes instead of 5)</li> <li><strong>Option 5:</strong> Pre-aggregate data in smaller summary tables</li> </ul> </li> </ol> <h2 id=extension-ideas-optional>Extension Ideas (Optional)<a class=headerlink href=#extension-ideas-optional title="Permanent link">&para;</a></h2> <ul> <li><strong>Clustering Visualization:</strong> Show how clustering orders data within partitions, further reducing scan cost</li> <li><strong>Partition Expiration:</strong> Demonstrate auto-deletion of old partitions to manage storage costs</li> <li><strong>Materialized Views:</strong> Show how pre-aggregating data into smaller materialized view reduces query costs</li> <li><strong>BI Engine Caching:</strong> Visualize how frequently-run queries get cached, eliminating scan costs for repeated queries</li> <li><strong>Time-Unit Column Partitioning:</strong> Compare partition by DATE column vs partition by ingestion time (_PARTITIONTIME)</li> <li><strong>Integer Range Partitioning:</strong> Show partitioning by integer columns (e.g., customer_id ranges 0-999, 1000-1999) for non-temporal data</li> <li><strong>Partition Decorator Queries:</strong> Demonstrate querying specific partitions: <code>SELECT * FROM table$20240115</code></li> <li><strong>Flat-Rate vs On-Demand Calculator:</strong> Let students input workload characteristics, calculate which pricing model is cheaper</li> <li><strong>Real-World Case Studies:</strong> Show actual company examples (Spotify saved 80% costs with partitioning, etc.)</li> <li><strong>Cross-Region Queries:</strong> Visualize data transfer costs when querying tables in different regions</li> </ul> <hr> <p><strong>Target Learning Outcome:</strong> Students understand that BigQuery costs are determined by data scanned, not returned, and that partitioning reduces costs by enabling partition pruning. Students can choose appropriate partition granularity based on query patterns and calculate cost savings for real-world scenarios.</p> </article> </div> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2026 Data Engineering Bootcamp </div> </div> <div class=md-social> <a href=https://github.com/yourusername/data-engineering-course target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://linkedin.com/in/yourprofile target=_blank rel=noopener title=linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.tabs", "navigation.sections", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.annotate"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script> <script src=../../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../../javascripts/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>